# 🕐 한국 시간 저장 방식 설명

## 변경 사항

Supabase Table Editor에서 한국 시간으로 표시되도록 수정했습니다.

## 동작 방식

### 저장 시
1. **클라이언트에서 주문 생성**
   - 한국 시간으로 `requestedAt` 생성 (예: `2026-01-21 23:34:27`)

2. **서버에서 UTC로 변환**
   - 한국 시간을 UTC로 변환 (9시간 빼기)
   - 예: 한국 시간 `23:34` → UTC `14:34`

3. **Supabase에 저장**
   - UTC 시간으로 저장 (예: `2026-01-21 14:34:27.986+00`)

### 조회 시
1. **Supabase에서 조회**
   - UTC 시간으로 조회 (예: `2026-01-21 14:34:27.986+00`)

2. **클라이언트에서 한국 시간으로 변환**
   - UTC 시간에 9시간 추가
   - 예: UTC `14:34` → 한국 시간 `23:34`

## 문제점

**현재 방식의 문제:**
- Supabase Table Editor는 원시 데이터(UTC)를 그대로 표시합니다
- 따라서 Table Editor에서는 여전히 UTC 시간으로 보입니다

## 해결 방법

### 옵션 1: Supabase Table Editor에서 시간대 설정 (권장하지 않음)
- Supabase Table Editor는 시간대 설정을 지원하지 않습니다
- 원시 데이터를 그대로 표시합니다

### 옵션 2: 한국 시간을 UTC로 변환하지 않고 저장 (비표준)
- PostgreSQL의 `timestamptz`는 항상 UTC로 저장됩니다
- 한국 시간을 그대로 저장하려면 `timestamp` 타입을 사용해야 하지만, 이는 시간대 정보를 잃게 됩니다

### 옵션 3: 현재 방식 유지 + UI에서만 한국 시간 표시 (권장)
- Supabase에는 UTC로 저장 (표준 관행)
- UI에서만 한국 시간으로 변환하여 표시
- 이미 구현 완료: `OrderList.tsx`, `NoteModal.tsx`

## 현재 구현 상태

✅ **완료:**
- UI에서 한국 시간으로 표시 (`OrderList.tsx`, `NoteModal.tsx`)
- 저장 시 한국 시간을 UTC로 변환 (`OrderModel.js`, `server.js`)

⚠️ **제한사항:**
- Supabase Table Editor는 여전히 UTC로 표시됩니다
- 이는 PostgreSQL의 표준 동작이며 변경할 수 없습니다

## 권장 사항

**Supabase Table Editor에서 한국 시간을 보고 싶다면:**
1. UTC 시간에 9시간을 더하여 계산
2. 또는 애플리케이션 UI에서 확인 (한국 시간으로 표시됨)

**예시:**
- Supabase Table Editor: `2026-01-21 14:34:27.986+00` (UTC)
- 실제 한국 시간: `2026-01-21 23:34:27` (UTC+9)
- 애플리케이션 UI: `2026-01-21 23:34:27` (한국 시간)

---

**결론**: Supabase Table Editor는 원시 데이터(UTC)를 표시하므로, 한국 시간을 보려면 UTC 시간에 9시간을 더하거나 애플리케이션 UI에서 확인하세요.
